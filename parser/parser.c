#include "parser.h"

extern int	successor_state[18][MAX_SYM];
extern int	reduce_table[NB_RULES];

t_switch	g_aut_parser[MAX_STATES][MAX_EVENTS] = {
	{{-1, shift, 1},
	 {-1, shift, 2},
	 {-1, shift, 3},
	 {-1, shift, 4},
	 {-1, shift, 5},
	 {-1, shift, 6},
	 {-1, shift, 7},
	 {-1, shift, 8},
	 {-1, shift, 9},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1}},

	{{17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1},
	 {17, reduce, -1}},

	{{2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1},
	 {2, reduce, -1}},
	
	{{-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, shift, 4},
	 {-1, shift, 5},
	 {-1, shift, 6},
	 {-1, shift, 7},
	 {-1, shift, 8},
	 {-1, shift, 9},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1}},
	
	{{-1, shift, 23},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1}},

	{{-1, shift, 25},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1}},

	{{-1, shift, 25},	
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1}},
	
	
	{{-1, shift, 25},	
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1}},
	
	{{-1, shift, 25},	
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1}},

	 
	{{-1, shift, 25},	
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1},
	 {-1, syntax_error, -1}},

	{{-1, accept, -1},
	 {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1},
         {-1, accept, -1}},

	{{-1, syntax_error, -1},
	{-1, shift, 31},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1}},

	{{-1, NULL, -1},
	{4, reduce, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, shift, 33},
        {-1, shift, 32},
        {-1, NULL, -1}},

        {{-1, NULL, -1},
        {6, reduce, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, shift, 35},
        {-1, shift, 36},
        {6, reduce, -1},
        {6, reduce, -1},
        {-1, NULL, -1}},
        
	{{-1, NULL, -1},
        {7, reduce, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {7, reduce, -1},
        {7, reduce, -1},
        {7, reduce, -1},
        {-1, shift, 37},
        {-1, shift, 37}},
	
	{{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1},	
	{10, reduce, -1}},

	{{-1, shift, 38},
	{14, reduce, -1},
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{14, reduce, -1},
	{14, reduce, -1},
	{14, reduce, -1},
	{14, reduce, -1},
	{14, reduce, -1}},

	{{-1, shift, 41},
	{16, reduce, -1},
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{16, reduce, -1},
	{16, reduce, -1},
	{16, reduce, -1},
	{16, reduce, -1},
	{16, reduce, -1}},

	{{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1},	
	{19, reduce, -1}},
	
	{{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1},	
	{25, reduce, -1}},

	{{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1},	
	{27, reduce, -1}},	

	{{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1},	
	{26, reduce, -1}},	
	
	{{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1},	
	{28, reduce, -1}},	

	{{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1},	
	{36, reduce, -1}},	

	{{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1},	
	{35, reduce, -1}},	

	{{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1},	
	{34, reduce, -1}},	

	{{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1},	
	{33, reduce, -1}},	

	{{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1},	
	{30, reduce, -1}},	

	{{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1},	
	{32, reduce, -1}},	

	{{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1},	
	{29, reduce, -1}},	

	{{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1},	
	{31, reduce, -1}},	

	{{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1},	
	{1, reduce, -1}},	

	{{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1},	
	{37, reduce, -1}},	

	{{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1},	
	{38, reduce, -1}},
	
	{{-1, shift, 1},	
	{-1, syntax_error, -1},
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
        {-1, NULL, -1}},
		
	{{-1, shift, 1},	
	{-1, syntax_error, -1},
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1}},
	
	{{-1, shift, 1},	
	{-1, syntax_error, -1},
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1}},

	{{-1, shift, 1},	
	{-1, syntax_error, -1},
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1},
	{-1, syntax_error, -1}},

	{{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1},	
	{18, reduce, -1}},	

	{{-1, shift, 41},	
	{13, reduce, -1},
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{13, reduce, -1},
	{13, reduce, -1},
	{13, reduce, -1},
	{13, reduce, -1},
	{13, reduce, -1}},
	
	{{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1},	
	{20, reduce, -1}},	

	{{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1},	
	{23, reduce, -1}},	

	{{-1, shift, 49},
	{15, reduce, -1},
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{15, reduce, -1},
	{15, reduce, -1},
	{15, reduce, -1},
	{15, reduce, -1},
	{15, reduce, -1}},

	{{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1},	
	{21, reduce, -1}},	

	{{-1, NULL, -1},
	{5, reduce, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, shift, 35},
        {-1, shift, 36},
        {5, reduce, -1},
        {5, reduce, -1},
        {-1, NULL, -1}},

	{{-1, NULL, -1},
	{8, reduce, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {-1, NULL, -1},
        {8, reduce, -1},
        {8, reduce, -1},
        {8, reduce, -1},
        {8, reduce, -1},
        {-1, shift, 37}},

	{{-1, NULL, -1},
	{9, reduce, -1},
	{-1, NULL, -1},
	{-1, NULL, -1},
	{-1, NULL, -1},
	{-1, NULL, -1},
	{-1, NULL, -1},
	{-1, NULL, -1},
	{-1, NULL, -1},
	{8, reduce, -1},
	{8, reduce, -1},
	{8, shift, -1},
        {-1, shift, 37}},

	{{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1},	
	{11, reduce, -1}},	
	
	{{-1, shift, 49},	
	{12, reduce, -1},	
	{-1, shift, 3},	
	{-1, shift, 4},	
	{-1, shift, 5},	
	{-1, shift, 6},	
	{-1, shift, 7},	
	{-1, shift, 8},	
	{-1, shift, 9},	
	{12, reduce, -1},	
	{12, reduce, -1},	
	{12, reduce, -1},	
	{12, reduce, -1},	
	{12, reduce, -1}},	

	{{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1},	
	{24, reduce, -1}},

	{{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1},	
	{22, reduce, -1}},

};

static const int	g_rules_len[] ={		2,
    2,    1,    2,    1,    3,    1,    1,    3,    3,    1,
    3,    3,    2,    1,    2,    1,    1,    1,    1,    2,
    1,    2,    1,    2,    1,    2,    1,    2,    2,    2,
    2,    2,    2,    1,    2,    1,    1,    1,
};

int		syntax_error(t_parser *parser)
{
	ft_printf("bash: syntax error near unexpected token `%s'\n", parser->cur_token->token);	
	return (-1);
}

int		accept(t_parser *parser)
{
	ft_printf("bash: syntax correct!\n");	
	return (-1);
}

int		shift(t_parser	*parser)
{
	push_token_stack(parser);
	push_state(parser);
	if (parser->cur_token->next)
		parser->cur_token = parser->cur_token->next;
	return (1);
}

inline int	get_successor_state(t_parser *parser, int sym_type)
{
	int	i;
	t_stack	*node;

	i = -1;
	while (++i < MAX_SYM)
	{
		if (successor_state[i][0] == parser->state)
			break;
	}
	parser->state = successor_state[i][sym_type];
	if ((node = (t_stack*)malloc(sizeof(t_stack))) == NULL)
                return (-1);
	node->state = parser->state;
        node->sym.type = -1;
        node->next = parser->stack;
        parser->stack = node;
	return (0);
}
int		reduce(t_parser *parser)
{
	int	i;
	int	k;
	
	i = g_aut_parser[parser->state][parser->cur_token->type].rule_number;
	k = i;
	i = g_rules_len[i] * 2 - 1;
	while (i--)
		pop_stack(&parser->stack);
	parser->stack->sym.type = reduce_table[k];
	if (parser->stack->next)
		parser->state = parser->stack->next->state;
	get_successor_state(parser, parser->stack->sym.type);
	return (1);
}

void            parser(t_token *token_list)
{
        t_parser        *parser;

        parser = init_parser(token_list);
        while (42)
        {
                if (g_aut_parser[parser->state][parser->cur_token->type].p_switch(parser) < 0)
			break;
		
        }
}
